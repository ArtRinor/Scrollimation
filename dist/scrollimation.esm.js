class t{static run(){t.instances.forEach(t=>{"requestAnimationFrame"===t.mode&&t._handler()}),window.requestAnimationFrame(t.run)}static addInstance(e){const n=(n=!1)=>{if("play"===e.status||n){const s=e.scrollContainer instanceof window.Element?e.scrollContainer.scrollTop:t.scrollTop,r=e.scrollContainer instanceof window.Element?e.scrollContainer.scrollLeft:t.scrollLeft;t.animate(s,r,e,n)}};e.fpsLimit?e._handler=t.Throttle(n,1e3/e.fpsLimit):e._handler=n,"onscroll"===e.mode&&e.scrollContainer.addEventListener("scroll",e._handler),t.instances.push(e),n(!0)}static removeInstance(e){t.instances=t.instances.filter(t=>t.id!==e.id)}static animate(t,e,n,s=!1){n.scrollTop=t,n.scrollLeft=e;let r="top"===n.direction?t:e;r>=n.from&&!n.startEmitted?("top"===n.direction?n.scrollTop=n.from:n.scrollLeft=n.from,n.startEmitted=!0,n.start(n),n.step(n)):r<=n.from&&n.startEmitted&&("top"===n.direction?n.scrollTop=n.from:n.scrollLeft=n.from,n.startEmitted=!1,n.step(n),n.reverseEnd(n)),r>=n.to&&!n.endEmitted?("top"===n.direction?n.scrollTop=n.to:n.scrollLeft=n.to,n.endEmitted=!0,n.step(n),n.end(n)):r<=n.to&&n.endEmitted&&("top"===n.direction?n.scrollTop=n.to:n.scrollLeft=n.to,n.endEmitted=!1,n.reverseStart(n),n.step(n)),(r>n.from&&r<n.to||s)&&n.step(n)}static Throttle(t,e){let n,s,r=!1;return function i(){if(r)return n=arguments,void(s=this);t.apply(this,arguments),r=!0,setTimeout((function(){r=!1,n&&(i.apply(s,n),n=s=null)}),e)}}static get scrollTop(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop}static get scrollLeft(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft}}t.instances=[],t.run();class e{constructor(e){this.id=Math.random().toString(36).substr(2,9),this.scrollContainer="string"==typeof e.scrollContainer?document.querySelector(e.scrollContainer):e.scrollContainer||window,this.from=e.from||0,this.to=e.to||0,this.direction=e.direction||"top",this.mode=e.mode||"requestAnimationFrame",this.fpsLimit=e.fpsLimit,this.init=e.init||(()=>{}),this.step=e.step||(()=>{}),this.start=e.start||(()=>{}),this.end=e.end||(()=>{}),this.reverseStart=e.reverseStart||(()=>{}),this.reverseEnd=e.reverseEnd||(()=>{}),this.startEmitted=!1,this.endEmitted=!1,e.target instanceof window.NodeList?this.target=[].slice.call(e.target):"string"==typeof e.target?this.target=[].slice.call(document.querySelectorAll(e.target)):this.target=e.target,this.easing=e.easing||"linear",this.scrollTop=this.scrollContainer instanceof window.Element?this.scrollContainer.scrollTop:t.scrollTop,this.scrollLeft=this.scrollContainer instanceof window.Element?this.scrollContainer.scrollLeft:t.scrollLeft,this.status="play",t.addInstance(this),this.init(this)}calc(t,n,s=this.easing){const r=/(^#[0-9A-F]{3}$)|(^#[0-9A-F]{4}$)|(^#[0-9A-F]{6}$)|(^#[0-9A-F]{8}$)/i;if("string"==typeof t&&r.test(t)&&"string"==typeof n&&r.test(n)){let r=[],i=e.HexToNums(t),o=e.HexToNums(n);return i.forEach((t,n)=>{r.push(e.Calculate("top"===this.direction?this.scrollTop:this.scrollLeft,this.from,this.to,t,o[n],"function"==typeof s?s:e.Easing[s]||e.Easing.linear))}),`rgba(${r[0]}, ${r[1]}, ${r[2]}, ${r[3]})`}return e.Calculate("top"===this.direction?this.scrollTop:this.scrollLeft,this.from,this.to,+t,+n,"function"==typeof s?s:e.Easing[s]||e.Easing.linear)}stop(){this.status="pause"}play(){this.status="play"}remove(){this.status="pause","onscroll"===this.mode&&this.scrollContainer.removeEventListener("scroll",this._handler),t.removeInstance(this)}static get Easing(){return{linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}}}static Calculate(t=0,e=0,n=0,s=0,r=0,i=(t=>t)){return s+(r-s)*i(((t=(t=t<e?e:t)>n?n:t)-e)/(n-e))}static HexToNums(t){let e;if(4===t.length){e=t.match(/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i).slice(1,4).map((function(t){return 17*parseInt(t,16)}))}else if(5===t.length){e=t.match(/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])$/i).slice(1,5).map((function(t){return 17*parseInt(t,16)}))}else if(7===t.length){e=t.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i).slice(1,4).map((function(t){return parseInt(t,16)}))}else if(9===t.length){e=t.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i).slice(1,5).map((function(t){return parseInt(t,16)}))}return e[3]=e[3]/255||1,e}}export default e;
//# sourceMappingURL=scrollimation.esm.js.map
